<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2020-12-12 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Daniel Sagenschneider" />
    <meta name="Date-Revision-yyyymmdd" content="20201212" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Dependency Injection of a POJO HTTP Server Tutorial &#x2013; Dependency Injection of a Plain Old Java Object (POJO) Tutorial</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

          <!-- shortcut icon -->
			<link rel="shortcut icon" href="/favicon.ico" />
			
			<!-- www.addthis.com (for sharing) -->
			<script type="text/javascript">
				$(document).ready(function() {
					var addThisScript = document.createElement("script");
					addThisScript.type = 'text/javascript';
					addThisScript.src = '//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c6e0c0bac25d2cf';
					document.body.appendChild(addThisScript);
				})
			</script>
                  <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23477455-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
          </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/officefloor/OfficeFloor">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://officefloor.net/" id="bannerLeft">
                                                                                        <img src="https://officefloor.net/images/OfficeFloorBannerImage.png"  alt="OfficeFloor"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="../../index.html" title="OfficeFloor">
        OfficeFloor</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../index.html" title="Tutorials">
        Tutorials</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="index.html" title="Dependency Injection of a POJO HTTP Server Tutorial">
        Dependency Injection of a POJO HTTP Server Tutorial</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Dependency Injection of a Plain Old Java Object (POJO) Tutorial</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2020-12-12</li>
              <li id="projectVersion" class="pull-right">
                    Version: 3.29.0
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../index.html" title="Tutorials">
          <span class="none"></span>
        Tutorials</a>
            </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="officefloor.net/officefloor/tutorials/DiPojoHttpServer/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="https://github.com/sponsors/sagenschneider" title="Support" class="builtBy">
        <img class="builtBy"  alt="Support" src="https://officefloor.net/images/sponsor.jpg"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Dependency_Injection_Tutorial"></a>Dependency Injection Tutorial</h2>
<p>This tutorial demonstrates the dependency injection of a Plain Old Java Object (POJO).</p>
<p>The example used in this tutorial is the following simple application to render a message to screen. Part of the message is obtained from a dependency injected POJO.</p><img src="./images/DiPojoHttpServer-screenshot.png" alt="DiPojoHttpServer screen shot." />
<p><a class="externalLink" href="https://github.com/officefloor/OfficeFloor/tree/master/officefloor/tutorials/DiPojoHttpServer">Tutorial Source</a></p>
<div class="section">
<h3><a name="Template"></a>Template</h3>
<p>The following is the content of the template.</p>
<div class="source"><pre class="prettyprint">&lt;html&gt;
	&lt;body&gt;
		&lt;p&gt;Hello ${audience}&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</pre></div>
<p>With the template logic.</p>
<div class="source"><pre class="prettyprint">public class TemplateLogic {

	public Pojo getTemplateData(Pojo dependency) {
		return dependency;
	}

}
</pre></div>
<p>WoOF (via its underlying OfficeFloor framework) injects dependencies into methods. By injecting dependencies into methods, WoOF makes development of applications simpler. This is because the application logic is written as loosely coupled methods rather than highly coupled objects. See <a class="externalLink" href="https://sagenschneider.blogspot.com/2019/02/inversion-of-coupling-control.html">Inversion of Coupling Control</a> for more details.</p>
<p>The injected dependency (POJO) will provide the remaining text of the rendered content. The code of the injected POJO is as follows.</p>
<div class="source"><pre class="prettyprint">public class Pojo {

	public String getAudience() {
		return &quot;World&quot;;
	}
}
</pre></div></div>
<div class="section">
<h3><a name="Object_Dependencies"></a>Object Dependencies</h3>
<p>While templates, <a class="externalLink" href="https://sagenschneider.blogspot.com/2019/06/local-microservices-first-class.html">first-class procedures</a> and other continuous integration aspects inject into methods. The injected objects themselves may also have dependencies.</p>
<p>Injection into objects can be done by the following various means.</p>
<div class="section">
<h4><a name="Field_Injection"></a>Field Injection</h4>
<div class="source"><pre class="prettyprint">public class FieldInjectedPojo {

	private @Dependency Pojo pojo;

	public String getAudience() {
		return this.pojo.getAudience();
	}

}
</pre></div></div>
<div class="section">
<h4><a name="Setter_Injection"></a>Setter Injection</h4>
<div class="source"><pre class="prettyprint">public class SetterInjectedPojo {

	private Pojo pojo;

	@Dependency
	public void setPojo(Pojo pojo) {
		this.pojo = pojo;
	}

	public String getAudience() {
		return this.pojo.getAudience();
	}

}
</pre></div></div>
<div class="section">
<h4><a name="Constructor_Injection"></a>Constructor Injection</h4>
<div class="source"><pre class="prettyprint">public class ConstructorInjectedPojo {

	private final Pojo pojo;

	public ConstructorInjectedPojo(Pojo pojo) {
		this.pojo = pojo;
	}

	public String getAudience() {
		return this.pojo.getAudience();
	}

}
</pre></div>
<p>Should there be more than one constructor, the constructor to use for dependency injection can be specified by adding a <a href="/apidocs/net/officefloor/plugin/clazz/Dependency.html">@Dependency</a> annotation.</p></div></div>
<div class="section">
<h3><a name="Configuring_Dependency_Injection"></a>Configuring Dependency Injection</h3>
<p>Objects for dependency injection are configured in the <tt>application.objects</tt> file contained at the root of the class path. Providing this file is optional, as it is anticipated that WoOF annotations will provide most POJO dependency configuration. However, it is supported to extend WoOF applications with additional dependencies as required.</p>
<p>Note that OfficeFloor does not do class path scanning. While this is convenient, any decent sized application will be slow to start. This makes class path scanning not appropriate for scale to zero applications due to slow start up times. Hence, OfficeFloor avoids class path scanning.</p>
<p>The configuration of dependency injecting the POJO is as follows.</p>
<div class="source"><pre class="prettyprint">&lt;objects&gt;

	&lt;managed-object class=&quot;net.officefloor.tutorial.dipojohttpserver.Pojo&quot; /&gt;

	&lt;managed-object class=&quot;net.officefloor.tutorial.dipojohttpserver.field.FieldInjectedPojo&quot; /&gt;
	&lt;managed-object class=&quot;net.officefloor.tutorial.dipojohttpserver.setter.SetterInjectedPojo&quot; /&gt;
	&lt;managed-object class=&quot;net.officefloor.tutorial.dipojohttpserver.constructor.ConstructorInjectedPojo&quot; /&gt;

&lt;/objects&gt;
</pre></div>
<p>The configuration above instantiates the POJOs. Should more complex logic be required, please see the tutorial on <a href="../DatabaseHttpServer/index.html">managed object source</a>.</p>
<p>WoOF auto-wires dependency injection based on type. Auto-wiring dependencies based on type is adequate (and much easier) for the majority of applications. WoOF's underlying OfficeFloor framework does provide manual dependency configuration, however this is seldom used as WoOF allows qualifying dependencies for auto-wiring.</p></div>
<div class="section">
<h3><a name="Unit_Test"></a>Unit Test</h3>
<p>The unit test ensures the correct rendered content is received.</p>
<div class="source"><pre class="prettyprint">	@RegisterExtension
	public final MockWoofServerExtension server = new MockWoofServerExtension();

	@Test
	public void injectIntoTest(Pojo testInjectedPojo) {
		assertEquals(&quot;World&quot;, testInjectedPojo.getAudience(), &quot;Dependency inject into test&quot;);
	}

	@Test
	public void ensureRenderPage() throws Exception {

		// Obtain the page
		MockHttpResponse response = this.server.send(MockHttpServer.mockRequest(&quot;/template&quot;));
		assertEquals(200, response.getStatus().getStatusCode(), &quot;Should be successful&quot;);

		// Ensure page contains correct rendered content
		String page = response.getEntity(null);
		assertTrue(page.contains(&quot;Hello World&quot;), &quot;Ensure correct page content&quot;);
	}
</pre></div>
<p>JUnit 4 example:</p>
<div class="source"><pre class="prettyprint">	@Rule
	public final MockWoofServerRule server = new MockWoofServerRule(this);

	private @Dependency Pojo testInjectedPojo;

	@Test
	public void injectIntoTest() {
		assertEquals(&quot;Dependency inject into test&quot;, &quot;World&quot;, this.testInjectedPojo.getAudience());
	}

	@Test
	public void ensureRenderPage() throws Exception {

		// Obtain the page
		MockHttpResponse response = this.server.send(MockHttpServer.mockRequest(&quot;/template&quot;));
		assertEquals(&quot;Should be successful&quot;, 200, response.getStatus().getStatusCode());

		// Ensure page contains correct rendered content
		String page = response.getEntity(null);
		assertTrue(&quot;Ensure correct page content&quot;, page.contains(&quot;Hello World&quot;));
	}
</pre></div></div></div>
<div class="section">
<h2><a name="Next"></a>Next</h2>
<p>The <a href="../TeamHttpServer/index.html">next tutorial</a> covers thread injection.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                                <p class="pull-right">Copyright &copy;                    2005&#x2013;2020
                        <a href="http://officefloor.net">OfficeFloor</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
